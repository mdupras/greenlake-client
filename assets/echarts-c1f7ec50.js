import{i as Qt,c as Bt,a as X,s as Xt,e as Yt,b as te,C as ee,n as yt,d as ot,f as V,g as Vt,h as lt,V as ae,j as ie,B as re,S as ne,k as se,l as vt,m as tt,o as Ft,p as J,q as oe,r as le,t as ve,u as he,v as ue,w as fe,x as ce,y as ut,z as de,_ as K,G as Ht,A as Dt,D as ge,E as ht,F as Gt,H as j,P as pe,I as St,J as zt,K as bt,R as _e,L as mt,M as et,N as me,O as ye,Q as Lt,T as wt,U as ft,W as Ct,X as Pt,Y as Ut,Z as ct,$ as At,a0 as De,a1 as Se,a2 as be,a3 as Le,a4 as we,a5 as Ce,a6 as Pe,a7 as xt,a8 as Ae,a9 as It,aa as xe,ab as Ie,ac as ke,ad as Wt,ae as at,af as pt,ag as Ne,ah as Re,ai as Zt,aj as Ee,ak as Te,al as Oe,am as Me,an as it,ao as rt,ap as Be,aq as Ve,ar as Fe,as as nt,at as He,au as Ge}from"./echarts-components-e3de5e74.js";function ze(s,t){Qt(s)||(s=Bt(s)),t=t||{};var e=t.coordDimensions||[],a=t.dimensionsDefine||s.dimensionsDefine||[],n=X(),r=[],i=We(s,e,a,t.dimensionsCount),o=t.canOmitUnusedDimensions&&Xt(i),l=a===s.dimensionsDefine,v=l?Yt(s):te(a),u=t.encodeDefine;!u&&t.encodeDefaulter&&(u=t.encodeDefaulter(s,i));for(var h=X(u),c=new ee(i),f=0;f<c.length;f++)c[f]=-1;function m(L){var P=c[L];if(P<0){var A=a[L],S=vt(A)?A:{name:A},w=new se,R=S.name;R!=null&&v.get(R)!=null&&(w.name=w.displayName=R),S.type!=null&&(w.type=S.type),S.displayName!=null&&(w.displayName=S.displayName);var k=r.length;return c[L]=k,w.storeDimIndex=L,r.push(w),w}return r[P]}if(!o)for(var f=0;f<i;f++)m(f);h.each(function(L,P){var A=yt(L).slice();if(A.length===1&&!ot(A[0])&&A[0]<0){h.set(P,!1);return}var S=h.set(P,[]);V(A,function(w,R){var k=ot(w)?v.get(w):w;k!=null&&k<i&&(S[R]=k,_(m(k),P,R))})});var p=0;V(e,function(L){var P,A,S,w;if(ot(L))P=L,w={};else{w=L,P=w.name;var R=w.ordinalMeta;w.ordinalMeta=null,w=Vt({},w),w.ordinalMeta=R,A=w.dimsDef,S=w.otherDims,w.name=w.coordDim=w.coordDimIndex=w.dimsDef=w.otherDims=null}var k=h.get(P);if(k!==!1){if(k=yt(k),!k.length)for(var T=0;T<(A&&A.length||1);T++){for(;p<i&&m(p).coordDim!=null;)p++;p<i&&k.push(p++)}V(k,function(B,E){var N=m(B);if(l&&w.type!=null&&(N.type=w.type),_(lt(N,w),P,E),N.name==null&&A){var M=A[E];!vt(M)&&(M={name:M}),N.name=N.displayName=M.name,N.defaultTooltip=M.defaultTooltip}S&&lt(N.otherDims,S)})}});function _(L,P,A){ae.get(P)!=null?L.otherDims[P]=A:(L.coordDim=P,L.coordDimIndex=A,n.set(P,!0))}var g=t.generateCoord,d=t.generateCoordCount,y=d!=null;d=g?d||1:0;var C=g||"value";function I(L){L.name==null&&(L.name=L.coordDim)}if(o)V(r,function(L){I(L)}),r.sort(function(L,P){return L.storeDimIndex-P.storeDimIndex});else for(var b=0;b<i;b++){var D=m(b),x=D.coordDim;x==null&&(D.coordDim=Ze(C,n,y),D.coordDimIndex=0,(!g||d<=0)&&(D.isExtraCoord=!0),d--),I(D),D.type==null&&(ie(s,b)===re.Must||D.isExtraCoord&&(D.otherDims.itemName!=null||D.otherDims.seriesName!=null))&&(D.type="ordinal")}return Ue(r),new ne({source:s,dimensions:r,fullDimensionCount:i,dimensionOmitted:o})}function Ue(s){for(var t=X(),e=0;e<s.length;e++){var a=s[e],n=a.name,r=t.get(n)||0;r>0&&(a.name=n+(r-1)),r++,t.set(n,r)}}function We(s,t,e,a){var n=Math.max(s.dimensionsDetectedCount||1,t.length,e.length,a||0);return V(t,function(r){var i;vt(r)&&(i=r.dimsDef)&&(n=Math.max(n,i.length))}),n}function Ze(s,t,e){if(e||t.hasKey(s)){for(var a=0;t.hasKey(s+a);)a++;s+=a}return t.set(s,!0),s}var qe=function(){function s(t){this.coordSysDims=[],this.axisMap=X(),this.categoryAxisMap=X(),this.coordSysName=t}return s}();function $e(s){var t=s.get("coordinateSystem"),e=new qe(t),a=je[t];if(a)return a(s,e,e.axisMap,e.categoryAxisMap),e}var je={cartesian2d:function(s,t,e,a){var n=s.getReferringComponents("xAxis",tt).models[0],r=s.getReferringComponents("yAxis",tt).models[0];t.coordSysDims=["x","y"],e.set("x",n),e.set("y",r),$(n)&&(a.set("x",n),t.firstCategoryDimIndex=0),$(r)&&(a.set("y",r),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(s,t,e,a){var n=s.getReferringComponents("singleAxis",tt).models[0];t.coordSysDims=["single"],e.set("single",n),$(n)&&(a.set("single",n),t.firstCategoryDimIndex=0)},polar:function(s,t,e,a){var n=s.getReferringComponents("polar",tt).models[0],r=n.findAxisModel("radiusAxis"),i=n.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],e.set("radius",r),e.set("angle",i),$(r)&&(a.set("radius",r),t.firstCategoryDimIndex=0),$(i)&&(a.set("angle",i),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(s,t,e,a){t.coordSysDims=["lng","lat"]},parallel:function(s,t,e,a){var n=s.ecModel,r=n.getComponent("parallel",s.get("parallelIndex")),i=t.coordSysDims=r.dimensions.slice();V(r.parallelAxisIndex,function(o,l){var v=n.getComponent("parallelAxis",o),u=i[l];e.set(u,v),$(v)&&(a.set(u,v),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function $(s){return s.get("type")==="category"}function Je(s,t){var e=s.get("coordinateSystem"),a=ce.get(e),n;return t&&t.coordSysDims&&(n=ut(t.coordSysDims,function(r){var i={name:r},o=t.axisMap.get(r);if(o){var l=o.get("type");i.type=de(l)}return i})),n||(n=a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"]),n}function Ke(s,t,e){var a,n;return e&&V(s,function(r,i){var o=r.coordDim,l=e.categoryAxisMap.get(o);l&&(a==null&&(a=i),r.ordinalMeta=l.getOrdinalMeta(),t&&(r.createInvertedIndices=!0)),r.otherDims.itemName!=null&&(n=!0)}),!n&&a!=null&&(s[a].otherDims.itemName=0),a}function Qe(s,t,e){e=e||{};var a=t.getSourceManager(),n,r=!1;s?(r=!0,n=Bt(s)):(n=a.getSource(),r=n.sourceFormat===Ft);var i=$e(t),o=Je(t,i),l=e.useEncodeDefaulter,v=J(l)?l:l?oe(le,o,t):null,u={coordDimensions:o,generateCoord:e.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:v,canOmitUnusedDimensions:!r},h=ze(n,u),c=Ke(h.dimensions,e.createInvertedIndices,i),f=r?null:a.getSharedDataStore(h),m=ve(t,{schema:h,store:f}),p=new he(h,t);p.setCalculationInfo(m);var _=c!=null&&Xe(n)?function(g,d,y,C){return C===c?y:this.defaultDimValueGetter(g,d,y,C)}:null;return p.hasItemOption=!1,p.initData(r?n:f,null,_),p}function Xe(s){if(s.sourceFormat===Ft){var t=Ye(s.data||[]);return!ue(fe(t))}}function Ye(s){for(var t=0;t<s.length&&s[t]==null;)t++;return s[t]}var ta=function(s){K(t,s);function t(){var e=s!==null&&s.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e){return Qe(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(e){var a=new Ht,n=Dt("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);a.add(n),n.setStyle(e.lineStyle);var r=this.getData().getVisual("symbol"),i=this.getData().getVisual("symbolRotate"),o=r==="none"?"circle":r,l=e.itemHeight*.8,v=Dt(o,(e.itemWidth-l)/2,(e.itemHeight-l)/2,l,l,e.itemStyle.fill);a.add(v),v.setStyle(e.itemStyle);var u=e.iconRotate==="inherit"?i:e.iconRotate||0;return v.rotation=u*Math.PI/180,v.setOrigin([e.itemWidth/2,e.itemHeight/2]),o.indexOf("empty")>-1&&(v.style.stroke=v.style.fill,v.style.fill="#fff",v.style.lineWidth=2),a},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(ge);const ea=ta;function qt(s,t,e){var a=s.getBaseAxis(),n=s.getOtherAxis(a),r=aa(n,e),i=a.dim,o=n.dim,l=t.mapDimension(o),v=t.mapDimension(i),u=o==="x"||o==="radius"?1:0,h=ut(s.dimensions,function(m){return t.mapDimension(m)}),c=!1,f=t.getCalculationInfo("stackResultDimension");return ht(t,h[0])&&(c=!0,h[0]=f),ht(t,h[1])&&(c=!0,h[1]=f),{dataDimsForPoint:h,valueStart:r,valueAxisDim:o,baseAxisDim:i,stacked:!!c,valueDim:l,baseDim:v,baseDataOffset:u,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function aa(s,t){var e=0,a=s.scale.getExtent();return t==="start"?e=a[0]:t==="end"?e=a[1]:Gt(t)&&!isNaN(t)?e=t:a[0]>0?e=a[0]:a[1]<0&&(e=a[1]),e}function $t(s,t,e,a){var n=NaN;s.stacked&&(n=e.get(e.getCalculationInfo("stackedOverDimension"),a)),isNaN(n)&&(n=s.valueStart);var r=s.baseDataOffset,i=[];return i[r]=e.get(s.baseDim,a),i[1-r]=n,t.dataToPoint(i)}function ia(s,t){var e=[];return t.diff(s).add(function(a){e.push({cmd:"+",idx:a})}).update(function(a,n){e.push({cmd:"=",idx:n,idx1:a})}).remove(function(a){e.push({cmd:"-",idx:a})}).execute(),e}function ra(s,t,e,a,n,r,i,o){for(var l=ia(s,t),v=[],u=[],h=[],c=[],f=[],m=[],p=[],_=qt(n,t,i),g=s.getLayout("points")||[],d=t.getLayout("points")||[],y=0;y<l.length;y++){var C=l[y],I=!0,b=void 0,D=void 0;switch(C.cmd){case"=":b=C.idx*2,D=C.idx1*2;var x=g[b],L=g[b+1],P=d[D],A=d[D+1];(isNaN(x)||isNaN(L))&&(x=P,L=A),v.push(x,L),u.push(P,A),h.push(e[b],e[b+1]),c.push(a[D],a[D+1]),p.push(t.getRawIndex(C.idx1));break;case"+":var S=C.idx,w=_.dataDimsForPoint,R=n.dataToPoint([t.get(w[0],S),t.get(w[1],S)]);D=S*2,v.push(R[0],R[1]),u.push(d[D],d[D+1]);var k=$t(_,n,t,S);h.push(k[0],k[1]),c.push(a[D],a[D+1]),p.push(t.getRawIndex(S));break;case"-":I=!1}I&&(f.push(C),m.push(m.length))}m.sort(function(Y,O){return p[Y]-p[O]});for(var T=v.length,B=j(T),E=j(T),N=j(T),M=j(T),G=[],y=0;y<m.length;y++){var Q=m[y],F=y*2,H=Q*2;B[F]=v[H],B[F+1]=v[H+1],E[F]=u[H],E[F+1]=u[H+1],N[F]=h[H],N[F+1]=h[H+1],M[F]=c[H],M[F+1]=c[H+1],G[y]=f[Q]}return{current:B,next:E,stackedOnCurrent:N,stackedOnNext:M,status:G}}var z=Math.min,U=Math.max;function q(s,t){return isNaN(s)||isNaN(t)}function _t(s,t,e,a,n,r,i,o,l){for(var v,u,h,c,f,m,p=e,_=0;_<a;_++){var g=t[p*2],d=t[p*2+1];if(p>=n||p<0)break;if(q(g,d)){if(l){p+=r;continue}break}if(p===e)s[r>0?"moveTo":"lineTo"](g,d),h=g,c=d;else{var y=g-v,C=d-u;if(y*y+C*C<.5){p+=r;continue}if(i>0){for(var I=p+r,b=t[I*2],D=t[I*2+1];b===g&&D===d&&_<a;)_++,I+=r,p+=r,b=t[I*2],D=t[I*2+1],g=t[p*2],d=t[p*2+1],y=g-v,C=d-u;var x=_+1;if(l)for(;q(b,D)&&x<a;)x++,I+=r,b=t[I*2],D=t[I*2+1];var L=.5,P=0,A=0,S=void 0,w=void 0;if(x>=a||q(b,D))f=g,m=d;else{P=b-v,A=D-u;var R=g-v,k=b-g,T=d-u,B=D-d,E=void 0,N=void 0;if(o==="x"){E=Math.abs(R),N=Math.abs(k);var M=P>0?1:-1;f=g-M*E*i,m=d,S=g+M*N*i,w=d}else if(o==="y"){E=Math.abs(T),N=Math.abs(B);var G=A>0?1:-1;f=g,m=d-G*E*i,S=g,w=d+G*N*i}else E=Math.sqrt(R*R+T*T),N=Math.sqrt(k*k+B*B),L=N/(N+E),f=g-P*i*(1-L),m=d-A*i*(1-L),S=g+P*i*L,w=d+A*i*L,S=z(S,U(b,g)),w=z(w,U(D,d)),S=U(S,z(b,g)),w=U(w,z(D,d)),P=S-g,A=w-d,f=g-P*E/N,m=d-A*E/N,f=z(f,U(v,g)),m=z(m,U(u,d)),f=U(f,z(v,g)),m=U(m,z(u,d)),P=g-f,A=d-m,S=g+P*N/E,w=d+A*N/E}s.bezierCurveTo(h,c,f,m,g,d),h=S,c=w}else s.lineTo(g,d)}v=g,u=d,p+=r}return _}var jt=function(){function s(){this.smooth=0,this.smoothConstraint=!0}return s}(),na=function(s){K(t,s);function t(e){var a=s.call(this,e)||this;return a.type="ec-polyline",a}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new jt},t.prototype.buildPath=function(e,a){var n=a.points,r=0,i=n.length/2;if(a.connectNulls){for(;i>0&&q(n[i*2-2],n[i*2-1]);i--);for(;r<i&&q(n[r*2],n[r*2+1]);r++);}for(;r<i;)r+=_t(e,n,r,i,i,1,a.smooth,a.smoothMonotone,a.connectNulls)+1},t.prototype.getPointOn=function(e,a){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n=this.path,r=n.data,i=pe.CMD,o,l,v=a==="x",u=[],h=0;h<r.length;){var c=r[h++],f=void 0,m=void 0,p=void 0,_=void 0,g=void 0,d=void 0,y=void 0;switch(c){case i.M:o=r[h++],l=r[h++];break;case i.L:if(f=r[h++],m=r[h++],y=v?(e-o)/(f-o):(e-l)/(m-l),y<=1&&y>=0){var C=v?(m-l)*y+l:(f-o)*y+o;return v?[e,C]:[C,e]}o=f,l=m;break;case i.C:f=r[h++],m=r[h++],p=r[h++],_=r[h++],g=r[h++],d=r[h++];var I=v?St(o,f,p,g,e,u):St(l,m,_,d,e,u);if(I>0)for(var b=0;b<I;b++){var D=u[b];if(D<=1&&D>=0){var C=v?bt(l,m,_,d,D):bt(o,f,p,g,D);return v?[e,C]:[C,e]}}o=g,l=d;break}}},t}(zt),sa=function(s){K(t,s);function t(){return s!==null&&s.apply(this,arguments)||this}return t}(jt),oa=function(s){K(t,s);function t(e){var a=s.call(this,e)||this;return a.type="ec-polygon",a}return t.prototype.getDefaultShape=function(){return new sa},t.prototype.buildPath=function(e,a){var n=a.points,r=a.stackedOnPoints,i=0,o=n.length/2,l=a.smoothMonotone;if(a.connectNulls){for(;o>0&&q(n[o*2-2],n[o*2-1]);o--);for(;i<o&&q(n[i*2],n[i*2+1]);i++);}for(;i<o;){var v=_t(e,n,i,o,o,1,a.smooth,l,a.connectNulls);_t(e,r,i+v-1,v,o,-1,a.stackedOnSmooth,l,a.connectNulls),i+=v+1,e.closePath()}},t}(zt);function la(s,t,e,a,n){var r=s.getArea(),i=r.x,o=r.y,l=r.width,v=r.height,u=e.get(["lineStyle","width"])||2;i-=u/2,o-=u/2,l+=u,v+=u,i=Math.floor(i),l=Math.round(l);var h=new _e({shape:{x:i,y:o,width:l,height:v}});if(t){var c=s.getBaseAxis(),f=c.isHorizontal(),m=c.inverse;f?(m&&(h.shape.x+=l),h.shape.width=0):(m||(h.shape.y+=v),h.shape.height=0);var p=J(n)?function(_){n(_,h)}:null;mt(h,{shape:{width:l,height:v,x:i,y:o}},e,null,a,p)}return h}function va(s,t,e){var a=s.getArea(),n=et(a.r0,1),r=et(a.r,1),i=new me({shape:{cx:et(s.cx,1),cy:et(s.cy,1),r0:n,r,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}});if(t){var o=s.getBaseAxis().dim==="angle";o?i.shape.endAngle=a.startAngle:i.shape.r=n,mt(i,{shape:{endAngle:a.endAngle,r}},e)}return i}function kt(s,t){if(s.length===t.length){for(var e=0;e<s.length;e++)if(s[e]!==t[e])return;return!0}}function Nt(s){for(var t=1/0,e=1/0,a=-1/0,n=-1/0,r=0;r<s.length;){var i=s[r++],o=s[r++];isNaN(i)||(t=Math.min(i,t),a=Math.max(i,a)),isNaN(o)||(e=Math.min(o,e),n=Math.max(o,n))}return[[t,e],[a,n]]}function Rt(s,t){var e=Nt(s),a=e[0],n=e[1],r=Nt(t),i=r[0],o=r[1];return Math.max(Math.abs(a[0]-i[0]),Math.abs(a[1]-i[1]),Math.abs(n[0]-o[0]),Math.abs(n[1]-o[1]))}function Et(s){return Gt(s)?s:s?.5:0}function ha(s,t,e){if(!e.valueDim)return[];for(var a=t.count(),n=j(a*2),r=0;r<a;r++){var i=$t(e,s,t,r);n[r*2]=i[0],n[r*2+1]=i[1]}return n}function W(s,t,e,a){var n=t.getBaseAxis(),r=n.dim==="x"||n.dim==="radius"?0:1,i=[],o=0,l=[],v=[],u=[],h=[];if(a){for(o=0;o<s.length;o+=2)!isNaN(s[o])&&!isNaN(s[o+1])&&h.push(s[o],s[o+1]);s=h}for(o=0;o<s.length-2;o+=2)switch(u[0]=s[o+2],u[1]=s[o+3],v[0]=s[o],v[1]=s[o+1],i.push(v[0],v[1]),e){case"end":l[r]=u[r],l[1-r]=v[1-r],i.push(l[0],l[1]);break;case"middle":var c=(v[r]+u[r])/2,f=[];l[r]=f[r]=c,l[1-r]=v[1-r],f[1-r]=u[1-r],i.push(l[0],l[1]),i.push(f[0],f[1]);break;default:l[r]=v[r],l[1-r]=u[1-r],i.push(l[0],l[1])}return i.push(s[o++],s[o++]),i}function ua(s,t){var e=[],a=s.length,n,r;function i(u,h,c){var f=u.coord,m=(c-f)/(h.coord-f),p=Ie(m,[u.color,h.color]);return{coord:c,color:p}}for(var o=0;o<a;o++){var l=s[o],v=l.coord;if(v<0)n=l;else if(v>t){r?e.push(i(r,l,t)):n&&e.push(i(n,l,0),i(n,l,t));break}else n&&(e.push(i(n,l,0)),n=null),e.push(l),r=l}return e}function fa(s,t,e){var a=s.getVisual("visualMeta");if(!(!a||!a.length||!s.count())&&t.type==="cartesian2d"){for(var n,r,i=a.length-1;i>=0;i--){var o=s.getDimensionInfo(a[i].dimension);if(n=o&&o.coordDim,n==="x"||n==="y"){r=a[i];break}}if(r){var l=t.getAxis(n),v=ut(r.stops,function(y){return{coord:l.toGlobalCoord(l.dataToCoord(y.value)),color:y.color}}),u=v.length,h=r.outerColors.slice();u&&v[0].coord>v[u-1].coord&&(v.reverse(),h.reverse());var c=ua(v,n==="x"?e.getWidth():e.getHeight()),f=c.length;if(!f&&u)return v[0].coord<0?h[1]?h[1]:v[u-1].color:h[0]?h[0]:v[0].color;var m=10,p=c[0].coord-m,_=c[f-1].coord+m,g=_-p;if(g<.001)return"transparent";V(c,function(y){y.offset=(y.coord-p)/g}),c.push({offset:f?c[f-1].offset:.5,color:h[1]||"transparent"}),c.unshift({offset:f?c[0].offset:.5,color:h[0]||"transparent"});var d=new Ae(0,0,0,0,c,!0);return d[n]=p,d[n+"2"]=_,d}}}function ca(s,t,e){var a=s.get("showAllSymbol"),n=a==="auto";if(!(a&&!n)){var r=e.getAxesByScale("ordinal")[0];if(r&&!(n&&da(r,t))){var i=t.mapDimension(r.dim),o={};return V(r.getViewLabels(),function(l){var v=r.scale.getRawOrdinalNumber(l.tickValue);o[v]=1}),function(l){return!o.hasOwnProperty(t.get(i,l))}}}}function da(s,t){var e=s.getExtent(),a=Math.abs(e[1]-e[0])/s.scale.count();isNaN(a)&&(a=0);for(var n=t.count(),r=Math.max(1,Math.round(n/5)),i=0;i<n;i+=r)if(Ut.getSymbolSize(t,i)[s.isHorizontal()?1:0]*1.5>a)return!1;return!0}function ga(s,t){return isNaN(s)||isNaN(t)}function pa(s){for(var t=s.length/2;t>0&&ga(s[t*2-2],s[t*2-1]);t--);return t-1}function Tt(s,t){return[s[t*2],s[t*2+1]]}function _a(s,t,e){for(var a=s.length/2,n=e==="x"?0:1,r,i,o=0,l=-1,v=0;v<a;v++)if(i=s[v*2+n],!(isNaN(i)||isNaN(s[v*2+1-n]))){if(v===0){r=i;continue}if(r<=t&&i>=t||r>=t&&i<=t){l=v;break}o=v,r=i}return{range:[o,l],t:(t-r)/(i-r)}}function Jt(s){if(s.get(["endLabel","show"]))return!0;for(var t=0;t<It.length;t++)if(s.get([It[t],"endLabel","show"]))return!0;return!1}function dt(s,t,e,a){if(xe(t,"cartesian2d")){var n=a.getModel("endLabel"),r=n.get("valueAnimation"),i=a.getData(),o={lastFrameIndex:0},l=Jt(a)?function(f,m){s._endLabelOnDuring(f,m,i,o,r,n,t)}:null,v=t.getBaseAxis().isHorizontal(),u=la(t,e,a,function(){var f=s._endLabel;f&&e&&o.originalX!=null&&f.attr({x:o.originalX,y:o.originalY})},l);if(!a.get("clip",!0)){var h=u.shape,c=Math.max(h.width,h.height);v?(h.y-=c,h.height+=c*2):(h.x-=c,h.width+=c*2)}return l&&l(1,u),u}else return va(t,e,a)}function ma(s,t){var e=t.getBaseAxis(),a=e.isHorizontal(),n=e.inverse,r=a?n?"right":"left":"center",i=a?"middle":n?"top":"bottom";return{normal:{align:s.get("align")||r,verticalAlign:s.get("verticalAlign")||i}}}var ya=function(s){K(t,s);function t(){return s!==null&&s.apply(this,arguments)||this}return t.prototype.init=function(){var e=new Ht,a=new ye;this.group.add(a.group),this._symbolDraw=a,this._lineGroup=e},t.prototype.render=function(e,a,n){var r=this,i=e.coordinateSystem,o=this.group,l=e.getData(),v=e.getModel("lineStyle"),u=e.getModel("areaStyle"),h=l.getLayout("points")||[],c=i.type==="polar",f=this._coordSys,m=this._symbolDraw,p=this._polyline,_=this._polygon,g=this._lineGroup,d=!a.ssr&&e.isAnimationEnabled(),y=!u.isEmpty(),C=u.get("origin"),I=qt(i,l,C),b=y&&ha(i,l,I),D=e.get("showSymbol"),x=e.get("connectNulls"),L=D&&!c&&ca(e,l,i),P=this._data;P&&P.eachItemGraphicEl(function(O,Kt){O.__temp&&(o.remove(O),P.setItemGraphicEl(Kt,null))}),D||m.remove(),o.add(g);var A=c?!1:e.get("step"),S;i&&i.getArea&&e.get("clip",!0)&&(S=i.getArea(),S.width!=null?(S.x-=.1,S.y-=.1,S.width+=.2,S.height+=.2):S.r0&&(S.r0-=.5,S.r+=.5)),this._clipShapeForSymbol=S;var w=fa(l,i,n)||l.getVisual("style")[l.getVisual("drawType")];if(!(p&&f.type===i.type&&A===this._step))D&&m.updateData(l,{isIgnore:L,clipShape:S,disableAnimation:!0,getSymbolPoint:function(O){return[h[O*2],h[O*2+1]]}}),d&&this._initSymbolLabelAnimation(l,i,S),A&&(h=W(h,i,A,x),b&&(b=W(b,i,A,x))),p=this._newPolyline(h),y?_=this._newPolygon(h,b):_&&(g.remove(_),_=this._polygon=null),c||this._initOrUpdateEndLabel(e,i,Lt(w)),g.setClipPath(dt(this,i,!0,e));else{y&&!_?_=this._newPolygon(h,b):_&&!y&&(g.remove(_),_=this._polygon=null),c||this._initOrUpdateEndLabel(e,i,Lt(w));var R=g.getClipPath();if(R){var k=dt(this,i,!1,e);mt(R,{shape:k.shape},e)}else g.setClipPath(dt(this,i,!0,e));D&&m.updateData(l,{isIgnore:L,clipShape:S,disableAnimation:!0,getSymbolPoint:function(O){return[h[O*2],h[O*2+1]]}}),(!kt(this._stackedOnPoints,b)||!kt(this._points,h))&&(d?this._doUpdateAnimation(l,b,i,n,A,C,x):(A&&(h=W(h,i,A,x),b&&(b=W(b,i,A,x))),p.setShape({points:h}),_&&_.setShape({points:h,stackedOnPoints:b})))}var T=e.getModel("emphasis"),B=T.get("focus"),E=T.get("blurScope"),N=T.get("disabled");if(p.useStyle(lt(v.getLineStyle(),{fill:"none",stroke:w,lineJoin:"bevel"})),wt(p,e,"lineStyle"),p.style.lineWidth>0&&e.get(["emphasis","lineStyle","width"])==="bolder"){var M=p.getState("emphasis").style;M.lineWidth=+p.style.lineWidth+1}ft(p).seriesIndex=e.seriesIndex,Ct(p,B,E,N);var G=Et(e.get("smooth")),Q=e.get("smoothMonotone");if(p.setShape({smooth:G,smoothMonotone:Q,connectNulls:x}),_){var F=l.getCalculationInfo("stackedOnSeries"),H=0;_.useStyle(lt(u.getAreaStyle(),{fill:w,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),F&&(H=Et(F.get("smooth"))),_.setShape({smooth:G,stackedOnSmooth:H,smoothMonotone:Q,connectNulls:x}),wt(_,e,"areaStyle"),ft(_).seriesIndex=e.seriesIndex,Ct(_,B,E,N)}var Y=function(O){r._changePolyState(O)};l.eachItemGraphicEl(function(O){O&&(O.onHoverStateChange=Y)}),this._polyline.onHoverStateChange=Y,this._data=l,this._coordSys=i,this._stackedOnPoints=b,this._points=h,this._step=A,this._valueOrigin=C,e.get("triggerLineEvent")&&(this.packEventData(e,p),_&&this.packEventData(e,_))},t.prototype.packEventData=function(e,a){ft(a).eventData={componentType:"series",componentSubType:"line",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"line"}},t.prototype.highlight=function(e,a,n,r){var i=e.getData(),o=Pt(i,r);if(this._changePolyState("emphasis"),!(o instanceof Array)&&o!=null&&o>=0){var l=i.getLayout("points"),v=i.getItemGraphicEl(o);if(!v){var u=l[o*2],h=l[o*2+1];if(isNaN(u)||isNaN(h)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(u,h))return;var c=e.get("zlevel")||0,f=e.get("z")||0;v=new Ut(i,o),v.x=u,v.y=h,v.setZ(c,f);var m=v.getSymbolPath().getTextContent();m&&(m.zlevel=c,m.z=f,m.z2=this._polyline.z2+1),v.__temp=!0,i.setItemGraphicEl(o,v),v.stopSymbolAnimation(!0),this.group.add(v)}v.highlight()}else ct.prototype.highlight.call(this,e,a,n,r)},t.prototype.downplay=function(e,a,n,r){var i=e.getData(),o=Pt(i,r);if(this._changePolyState("normal"),o!=null&&o>=0){var l=i.getItemGraphicEl(o);l&&(l.__temp?(i.setItemGraphicEl(o,null),this.group.remove(l)):l.downplay())}else ct.prototype.downplay.call(this,e,a,n,r)},t.prototype._changePolyState=function(e){var a=this._polygon;At(this._polyline,e),a&&At(a,e)},t.prototype._newPolyline=function(e){var a=this._polyline;return a&&this._lineGroup.remove(a),a=new na({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(a),this._polyline=a,a},t.prototype._newPolygon=function(e,a){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new oa({shape:{points:e,stackedOnPoints:a},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},t.prototype._initSymbolLabelAnimation=function(e,a,n){var r,i,o=a.getBaseAxis(),l=o.inverse;a.type==="cartesian2d"?(r=o.isHorizontal(),i=!1):a.type==="polar"&&(r=o.dim==="angle",i=!0);var v=e.hostModel,u=v.get("animationDuration");J(u)&&(u=u(null));var h=v.get("animationDelay")||0,c=J(h)?h(null):h;e.eachItemGraphicEl(function(f,m){var p=f;if(p){var _=[f.x,f.y],g=void 0,d=void 0,y=void 0;if(n)if(i){var C=n,I=a.pointToCoord(_);r?(g=C.startAngle,d=C.endAngle,y=-I[1]/180*Math.PI):(g=C.r0,d=C.r,y=I[0])}else{var b=n;r?(g=b.x,d=b.x+b.width,y=f.x):(g=b.y+b.height,d=b.y,y=f.y)}var D=d===g?0:(y-g)/(d-g);l&&(D=1-D);var x=J(h)?h(m):u*D+c,L=p.getSymbolPath(),P=L.getTextContent();p.attr({scaleX:0,scaleY:0}),p.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:x}),P&&P.animateFrom({style:{opacity:0}},{duration:300,delay:x}),L.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(e,a,n){var r=e.getModel("endLabel");if(Jt(e)){var i=e.getData(),o=this._polyline,l=i.getLayout("points");if(!l){o.removeTextContent(),this._endLabel=null;return}var v=this._endLabel;v||(v=this._endLabel=new De({z2:200}),v.ignoreClip=!0,o.setTextContent(this._endLabel),o.disableLabelAnimation=!0);var u=pa(l);u>=0&&(Se(o,we(e,"endLabel"),{inheritColor:n,labelFetcher:e,labelDataIndex:u,defaultText:function(h,c,f){return f!=null?be(i,f):Le(i,h)},enableTextSetter:!0},ma(r,a)),o.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(e,a,n,r,i,o,l){var v=this._endLabel,u=this._polyline;if(v){e<1&&r.originalX==null&&(r.originalX=v.x,r.originalY=v.y);var h=n.getLayout("points"),c=n.hostModel,f=c.get("connectNulls"),m=o.get("precision"),p=o.get("distance")||0,_=l.getBaseAxis(),g=_.isHorizontal(),d=_.inverse,y=a.shape,C=d?g?y.x:y.y+y.height:g?y.x+y.width:y.y,I=(g?p:0)*(d?-1:1),b=(g?0:-p)*(d?-1:1),D=g?"x":"y",x=_a(h,C,D),L=x.range,P=L[1]-L[0],A=void 0;if(P>=1){if(P>1&&!f){var S=Tt(h,L[0]);v.attr({x:S[0]+I,y:S[1]+b}),i&&(A=c.getRawValue(L[0]))}else{var S=u.getPointOn(C,D);S&&v.attr({x:S[0]+I,y:S[1]+b});var w=c.getRawValue(L[0]),R=c.getRawValue(L[1]);i&&(A=Ce(n,m,w,R,x.t))}r.lastFrameIndex=L[0]}else{var k=e===1||r.lastFrameIndex>0?L[0]:0,S=Tt(h,k);i&&(A=c.getRawValue(k)),v.attr({x:S[0]+I,y:S[1]+b})}i&&Pe(v).setLabelText(A)}},t.prototype._doUpdateAnimation=function(e,a,n,r,i,o,l){var v=this._polyline,u=this._polygon,h=e.hostModel,c=ra(this._data,e,this._stackedOnPoints,a,this._coordSys,n,this._valueOrigin),f=c.current,m=c.stackedOnCurrent,p=c.next,_=c.stackedOnNext;if(i&&(f=W(c.current,n,i,l),m=W(c.stackedOnCurrent,n,i,l),p=W(c.next,n,i,l),_=W(c.stackedOnNext,n,i,l)),Rt(f,p)>3e3||u&&Rt(m,_)>3e3){v.stopAnimation(),v.setShape({points:p}),u&&(u.stopAnimation(),u.setShape({points:p,stackedOnPoints:_}));return}v.shape.__points=c.current,v.shape.points=f;var g={shape:{points:p}};c.current!==f&&(g.shape.__points=c.next),v.stopAnimation(),xt(v,g,h),u&&(u.setShape({points:f,stackedOnPoints:m}),u.stopAnimation(),xt(u,{shape:{stackedOnPoints:_}},h),v.shape.points!==u.shape.points&&(u.shape.points=v.shape.points));for(var d=[],y=c.status,C=0;C<y.length;C++){var I=y[C].cmd;if(I==="="){var b=e.getItemGraphicEl(y[C].idx1);b&&d.push({el:b,ptIdx:C})}}v.animators&&v.animators.length&&v.animators[0].during(function(){u&&u.dirtyShape();for(var D=v.shape.__points,x=0;x<d.length;x++){var L=d[x].el,P=d[x].ptIdx*2;L.x=D[P],L.y=D[P+1],L.markRedraw()}})},t.prototype.remove=function(e){var a=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(r,i){r.__temp&&(a.remove(r),n.setItemGraphicEl(i,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(ct);const Da=ya;function Sa(s,t){return{seriesType:s,plan:ke(),reset:function(e){var a=e.getData(),n=e.coordinateSystem,r=e.pipelineContext,i=t||r.large;if(n){var o=ut(n.dimensions,function(f){return a.mapDimension(f)}).slice(0,2),l=o.length,v=a.getCalculationInfo("stackResultDimension");ht(a,o[0])&&(o[0]=v),ht(a,o[1])&&(o[1]=v);var u=a.getStore(),h=a.getDimensionIndex(o[0]),c=a.getDimensionIndex(o[1]);return l&&{progress:function(f,m){for(var p=f.end-f.start,_=i&&j(p*l),g=[],d=[],y=f.start,C=0;y<f.end;y++){var I=void 0;if(l===1){var b=u.get(h,y);I=n.dataToPoint(b,null,d)}else g[0]=u.get(h,y),g[1]=u.get(c,y),I=n.dataToPoint(g,null,d);i?(_[C++]=I[0],_[C++]=I[1]):m.setItemLayout(y,I.slice())}i&&m.setLayout("points",_)}}}}}}var ba={average:function(s){for(var t=0,e=0,a=0;a<s.length;a++)isNaN(s[a])||(t+=s[a],e++);return e===0?NaN:t/e},sum:function(s){for(var t=0,e=0;e<s.length;e++)t+=s[e]||0;return t},max:function(s){for(var t=-1/0,e=0;e<s.length;e++)s[e]>t&&(t=s[e]);return isFinite(t)?t:NaN},min:function(s){for(var t=1/0,e=0;e<s.length;e++)s[e]<t&&(t=s[e]);return isFinite(t)?t:NaN},nearest:function(s){return s[0]}},La=function(s){return Math.round(s.length/2)};function wa(s){return{seriesType:s,reset:function(t,e,a){var n=t.getData(),r=t.get("sampling"),i=t.coordinateSystem,o=n.count();if(o>10&&i.type==="cartesian2d"&&r){var l=i.getBaseAxis(),v=i.getOtherAxis(l),u=l.getExtent(),h=a.getDevicePixelRatio(),c=Math.abs(u[1]-u[0])*(h||1),f=Math.round(o/c);if(isFinite(f)&&f>1){r==="lttb"&&t.setData(n.lttbDownSample(n.mapDimension(v.dim),1/f));var m=void 0;ot(r)?m=ba[r]:J(r)&&(m=r),m&&t.setData(n.downSample(n.mapDimension(v.dim),1/f,m,La))}}}}}function Ra(s){s.registerChartView(Da),s.registerSeriesModel(ea),s.registerLayout(Sa("line",!0)),s.registerVisual({seriesType:"line",reset:function(t){var e=t.getData(),a=t.getModel("lineStyle").getLineStyle();a&&!a.stroke&&(a.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",a)}}),s.registerProcessor(s.PRIORITY.PROCESSOR.STATISTIC,wa("line"))}function Ot(s,t,e){var a=Re.createCanvas(),n=t.getWidth(),r=t.getHeight(),i=a.style;return i&&(i.position="absolute",i.left="0",i.top="0",i.width=n+"px",i.height=r+"px",a.setAttribute("data-zr-dom-id",s)),a.width=n*e,a.height=r*e,a}var Ca=function(s){K(t,s);function t(e,a,n){var r=s.call(this)||this;r.motionBlur=!1,r.lastFrameAlpha=.7,r.dpr=1,r.virtual=!1,r.config={},r.incremental=!1,r.zlevel=0,r.maxRepaintRectCount=5,r.__dirty=!0,r.__firstTimePaint=!0,r.__used=!1,r.__drawIndex=0,r.__startIndex=0,r.__endIndex=0,r.__prevStartIndex=null,r.__prevEndIndex=null;var i;n=n||Zt,typeof e=="string"?i=Ot(e,a,n):vt(e)&&(i=e,e=i.id),r.id=e,r.dom=i;var o=i.style;return o&&(Wt(i),i.onselectstart=function(){return!1},o.padding="0",o.margin="0",o.borderWidth="0"),r.painter=a,r.dpr=n,r}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var e=this.dpr;this.domBack=Ot("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),e!==1&&this.ctxBack.scale(e,e)},t.prototype.createRepaintRects=function(e,a,n,r){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var i=[],o=this.maxRepaintRectCount,l=!1,v=new at(0,0,0,0);function u(d){if(!(!d.isFinite()||d.isZero()))if(i.length===0){var y=new at(0,0,0,0);y.copy(d),i.push(y)}else{for(var C=!1,I=1/0,b=0,D=0;D<i.length;++D){var x=i[D];if(x.intersect(d)){var L=new at(0,0,0,0);L.copy(x),L.union(d),i[D]=L,C=!0;break}else if(l){v.copy(d),v.union(x);var P=d.width*d.height,A=x.width*x.height,S=v.width*v.height,w=S-P-A;w<I&&(I=w,b=D)}}if(l&&(i[b].union(d),C=!0),!C){var y=new at(0,0,0,0);y.copy(d),i.push(y)}l||(l=i.length>=o)}}for(var h=this.__startIndex;h<this.__endIndex;++h){var c=e[h];if(c){var f=c.shouldBePainted(n,r,!0,!0),m=c.__isRendered&&(c.__dirty&pt||!f)?c.getPrevPaintRect():null;m&&u(m);var p=f&&(c.__dirty&pt||!c.__isRendered)?c.getPaintRect():null;p&&u(p)}}for(var h=this.__prevStartIndex;h<this.__prevEndIndex;++h){var c=a[h],f=c.shouldBePainted(n,r,!0,!0);if(c&&(!f||!c.__zr)&&c.__isRendered){var m=c.getPrevPaintRect();m&&u(m)}}var _;do{_=!1;for(var h=0;h<i.length;){if(i[h].isZero()){i.splice(h,1);continue}for(var g=h+1;g<i.length;)i[h].intersect(i[g])?(_=!0,i[h].union(i[g]),i.splice(g,1)):g++;h++}}while(_);return this._paintRects=i,i},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(e,a){var n=this.dpr,r=this.dom,i=r.style,o=this.domBack;i&&(i.width=e+"px",i.height=a+"px"),r.width=e*n,r.height=a*n,o&&(o.width=e*n,o.height=a*n,n!==1&&this.ctxBack.scale(n,n))},t.prototype.clear=function(e,a,n){var r=this.dom,i=this.ctx,o=r.width,l=r.height;a=a||this.clearColor;var v=this.motionBlur&&!e,u=this.lastFrameAlpha,h=this.dpr,c=this;v&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(r,0,0,o/h,l/h));var f=this.domBack;function m(p,_,g,d){if(i.clearRect(p,_,g,d),a&&a!=="transparent"){var y=void 0;if(Ee(a)){var C=a.global||a.__width===g&&a.__height===d;y=C&&a.__canvasGradient||Te(i,a,{x:0,y:0,width:g,height:d}),a.__canvasGradient=y,a.__width=g,a.__height=d}else Oe(a)&&(a.scaleX=a.scaleX||h,a.scaleY=a.scaleY||h,y=Me(i,a,{dirty:function(){c.setUnpainted(),c.__painter.refresh()}}));i.save(),i.fillStyle=y||a,i.fillRect(p,_,g,d),i.restore()}v&&(i.save(),i.globalAlpha=u,i.drawImage(f,p,_,g,d),i.restore())}!n||v?m(0,0,o,l):n.length&&V(n,function(p){m(p.x*h,p.y*h,p.width*h,p.height*h)})},t}(Ne);const gt=Ca;var Mt=1e5,Z=314159,st=.01,Pa=.001;function Aa(s){return s?s.__builtin__?!0:!(typeof s.resize!="function"||typeof s.refresh!="function"):!1}function xa(s,t){var e=document.createElement("div");return e.style.cssText=["position:relative","width:"+s+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",e}var Ia=function(){function s(t,e,a,n){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var r=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=a=Vt({},a||{}),this.dpr=a.devicePixelRatio||Zt,this._singleCanvas=r,this.root=t;var i=t.style;i&&(Wt(t),t.innerHTML=""),this.storage=e;var o=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(r){var u=t,h=u.width,c=u.height;a.width!=null&&(h=a.width),a.height!=null&&(c=a.height),this.dpr=a.devicePixelRatio||1,u.width=h*this.dpr,u.height=c*this.dpr,this._width=h,this._height=c;var f=new gt(u,this,this.dpr);f.__builtin__=!0,f.initContext(),l[Z]=f,f.zlevel=Z,o.push(Z),this._domRoot=t}else{this._width=it(t,0,a),this._height=it(t,1,a);var v=this._domRoot=xa(this._width,this._height);t.appendChild(v)}}return s.prototype.getType=function(){return"canvas"},s.prototype.isSingleCanvas=function(){return this._singleCanvas},s.prototype.getViewportRoot=function(){return this._domRoot},s.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},s.prototype.refresh=function(t){var e=this.storage.getDisplayList(!0),a=this._prevDisplayList,n=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,a,t,this._redrawId);for(var r=0;r<n.length;r++){var i=n[r],o=this._layers[i];if(!o.__builtin__&&o.refresh){var l=r===0?this._backgroundColor:null;o.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=e.slice()),this},s.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},s.prototype._paintHoverList=function(t){var e=t.length,a=this._hoverlayer;if(a&&a.clear(),!!e){for(var n={inHover:!0,viewWidth:this._width,viewHeight:this._height},r,i=0;i<e;i++){var o=t[i];o.__inHover&&(a||(a=this._hoverlayer=this.getLayer(Mt)),r||(r=a.ctx,r.save()),rt(r,o,n,i===e-1))}r&&r.restore()}},s.prototype.getHoverLayer=function(){return this.getLayer(Mt)},s.prototype.paintOne=function(t,e){Be(t,e)},s.prototype._paintList=function(t,e,a,n){if(this._redrawId===n){a=a||!1,this._updateLayerStatus(t);var r=this._doPaintList(t,e,a),i=r.finished,o=r.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),o&&this._paintHoverList(t),i)this.eachLayer(function(v){v.afterBrush&&v.afterBrush()});else{var l=this;Ve(function(){l._paintList(t,e,a,n)})}}},s.prototype._compositeManually=function(){var t=this.getLayer(Z).ctx,e=this._domRoot.width,a=this._domRoot.height;t.clearRect(0,0,e,a),this.eachBuiltinLayer(function(n){n.virtual&&t.drawImage(n.dom,0,0,e,a)})},s.prototype._doPaintList=function(t,e,a){for(var n=this,r=[],i=this._opts.useDirtyRect,o=0;o<this._zlevelList.length;o++){var l=this._zlevelList[o],v=this._layers[l];v.__builtin__&&v!==this._hoverlayer&&(v.__dirty||a)&&r.push(v)}for(var u=!0,h=!1,c=function(p){var _=r[p],g=_.ctx,d=i&&_.createRepaintRects(t,e,f._width,f._height),y=a?_.__startIndex:_.__drawIndex,C=!a&&_.incremental&&Date.now,I=C&&Date.now(),b=_.zlevel===f._zlevelList[0]?f._backgroundColor:null;if(_.__startIndex===_.__endIndex)_.clear(!1,b,d);else if(y===_.__startIndex){var D=t[y];(!D.incremental||!D.notClear||a)&&_.clear(!1,b,d)}y===-1&&(console.error("For some unknown reason. drawIndex is -1"),y=_.__startIndex);var x,L=function(w){var R={inHover:!1,allClipped:!1,prevEl:null,viewWidth:n._width,viewHeight:n._height};for(x=y;x<_.__endIndex;x++){var k=t[x];if(k.__inHover&&(h=!0),n._doPaintEl(k,_,i,w,R,x===_.__endIndex-1),C){var T=Date.now()-I;if(T>15)break}}R.prevElClipPaths&&g.restore()};if(d)if(d.length===0)x=_.__endIndex;else for(var P=f.dpr,A=0;A<d.length;++A){var S=d[A];g.save(),g.beginPath(),g.rect(S.x*P,S.y*P,S.width*P,S.height*P),g.clip(),L(S),g.restore()}else g.save(),L(),g.restore();_.__drawIndex=x,_.__drawIndex<_.__endIndex&&(u=!1)},f=this,m=0;m<r.length;m++)c(m);return Fe.wxa&&V(this._layers,function(p){p&&p.ctx&&p.ctx.draw&&p.ctx.draw()}),{finished:u,needsRefreshHover:h}},s.prototype._doPaintEl=function(t,e,a,n,r,i){var o=e.ctx;if(a){var l=t.getPaintRect();(!n||l&&l.intersect(n))&&(rt(o,t,r,i),t.setPrevPaintRect(l))}else rt(o,t,r,i)},s.prototype.getLayer=function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=Z);var a=this._layers[t];return a||(a=new gt("zr_"+t,this,this.dpr),a.zlevel=t,a.__builtin__=!0,this._layerConfig[t]?nt(a,this._layerConfig[t],!0):this._layerConfig[t-st]&&nt(a,this._layerConfig[t-st],!0),e&&(a.virtual=e),this.insertLayer(t,a),a.initContext()),a},s.prototype.insertLayer=function(t,e){var a=this._layers,n=this._zlevelList,r=n.length,i=this._domRoot,o=null,l=-1;if(!a[t]&&Aa(e)){if(r>0&&t>n[0]){for(l=0;l<r-1&&!(n[l]<t&&n[l+1]>t);l++);o=a[n[l]]}if(n.splice(l+1,0,t),a[t]=e,!e.virtual)if(o){var v=o.dom;v.nextSibling?i.insertBefore(e.dom,v.nextSibling):i.appendChild(e.dom)}else i.firstChild?i.insertBefore(e.dom,i.firstChild):i.appendChild(e.dom);e.__painter=this}},s.prototype.eachLayer=function(t,e){for(var a=this._zlevelList,n=0;n<a.length;n++){var r=a[n];t.call(e,this._layers[r],r)}},s.prototype.eachBuiltinLayer=function(t,e){for(var a=this._zlevelList,n=0;n<a.length;n++){var r=a[n],i=this._layers[r];i.__builtin__&&t.call(e,i,r)}},s.prototype.eachOtherLayer=function(t,e){for(var a=this._zlevelList,n=0;n<a.length;n++){var r=a[n],i=this._layers[r];i.__builtin__||t.call(e,i,r)}},s.prototype.getLayers=function(){return this._layers},s.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(h,c){h.__dirty=h.__used=!1});function e(h){r&&(r.__endIndex!==h&&(r.__dirty=!0),r.__endIndex=h)}if(this._singleCanvas)for(var a=1;a<t.length;a++){var n=t[a];if(n.zlevel!==t[a-1].zlevel||n.incremental){this._needsManuallyCompositing=!0;break}}var r=null,i=0,o,l;for(l=0;l<t.length;l++){var n=t[l],v=n.zlevel,u=void 0;o!==v&&(o=v,i=0),n.incremental?(u=this.getLayer(v+Pa,this._needsManuallyCompositing),u.incremental=!0,i=1):u=this.getLayer(v+(i>0?st:0),this._needsManuallyCompositing),u.__builtin__||He("ZLevel "+v+" has been used by unkown layer "+u.id),u!==r&&(u.__used=!0,u.__startIndex!==l&&(u.__dirty=!0),u.__startIndex=l,u.incremental?u.__drawIndex=-1:u.__drawIndex=l,e(l),r=u),n.__dirty&pt&&!n.__inHover&&(u.__dirty=!0,u.incremental&&u.__drawIndex<0&&(u.__drawIndex=l))}e(l),this.eachBuiltinLayer(function(h,c){!h.__used&&h.getElementCount()>0&&(h.__dirty=!0,h.__startIndex=h.__endIndex=h.__drawIndex=0),h.__dirty&&h.__drawIndex<0&&(h.__drawIndex=h.__startIndex)})},s.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},s.prototype._clearLayer=function(t){t.clear()},s.prototype.setBackgroundColor=function(t){this._backgroundColor=t,V(this._layers,function(e){e.setUnpainted()})},s.prototype.configLayer=function(t,e){if(e){var a=this._layerConfig;a[t]?nt(a[t],e,!0):a[t]=e;for(var n=0;n<this._zlevelList.length;n++){var r=this._zlevelList[n];if(r===t||r===t+st){var i=this._layers[r];nt(i,a[t],!0)}}}},s.prototype.delLayer=function(t){var e=this._layers,a=this._zlevelList,n=e[t];n&&(n.dom.parentNode.removeChild(n.dom),delete e[t],a.splice(Ge(a,t),1))},s.prototype.resize=function(t,e){if(this._domRoot.style){var a=this._domRoot;a.style.display="none";var n=this._opts,r=this.root;if(t!=null&&(n.width=t),e!=null&&(n.height=e),t=it(r,0,n),e=it(r,1,n),a.style.display="",this._width!==t||e!==this._height){a.style.width=t+"px",a.style.height=e+"px";for(var i in this._layers)this._layers.hasOwnProperty(i)&&this._layers[i].resize(t,e);this.refresh(!0)}this._width=t,this._height=e}else{if(t==null||e==null)return;this._width=t,this._height=e,this.getLayer(Z).resize(t,e)}return this},s.prototype.clearLayer=function(t){var e=this._layers[t];e&&e.clear()},s.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},s.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[Z].dom;var e=new gt("image",this,t.pixelRatio||this.dpr);e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor);var a=e.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var n=e.dom.width,r=e.dom.height;this.eachLayer(function(h){h.__builtin__?a.drawImage(h.dom,0,0,n,r):h.renderToCanvas&&(a.save(),h.renderToCanvas(a),a.restore())})}else for(var i={inHover:!1,viewWidth:this._width,viewHeight:this._height},o=this.storage.getDisplayList(!0),l=0,v=o.length;l<v;l++){var u=o[l];rt(a,u,i,l===v-1)}return e.dom},s.prototype.getWidth=function(){return this._width},s.prototype.getHeight=function(){return this._height},s}();const ka=Ia;function Ea(s){s.registerPainter("canvas",ka)}export{Ra as a,Ea as i};
